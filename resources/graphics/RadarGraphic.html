<html>
<head>

<style>
	body
	{
		background: #f2f2f2;
		padding: 0px;
	}

	.chart-container
	{
		position: relative;
		margin: auto;
		height: 90vh;
		width: 90vw;
		display: none;	
	}
	
	.Alumnos{
		height: 45%;
		color: black;
	}
	
	.Calificaciones{
		height: 45%;
		color: black;
	}
	
	.GenerarGrafico{
		position: fixed;
		bottom: 5px;
		color: black;
	}
	
	.controles{
		padding-left: 10px;
	}
	
	.btn {
		background-color: #066db3;
		border: none;
		color: white;
		font-size: 13px;
		font-weight: bold;
		border-radius: 4px;
		cursor: pointer;
		padding-top: 5px;
		padding-bottom: 5px;
		margin-left: 10px;
	}
	
	.btn:hover {
		background-color: #0790ed;
	}
	
</style>
		
<script type="text/javascript" src="../../lib/Chart.js"></script>
<script type="text/javascript" src="../../lib/color-hash.js"></script>

</head>

<body>
<div class="controles">
<input type="button" value="Ocultar Leyenda" class="btn" id="btnLegend" onclick="hideLegend()"></input>
<input type="button" value="Mostrar Media" class="btn" id="btnMean" onclick="showMean()"></input>
</div>
<div id="inicio">
	<div class="Alumnos">1- SELECCIONA LOS ALUMNOSS</div>
	<div class="Calificaciones">2- SELECCIONA LAS CALIFICACIONES</div>
	<div class="GenerarGrafico">3- GENERA EL GRÁFICO</div>
</div>

<div id="chart-container" class="chart-container">
	<canvas id="myChart"></canvas>
</div>


<script>

var options = {
	maintainAspectRatio: false,
	responsive: true,
	responsiveAnimationDuration: 0, // animation duration after a resize, better perfomance at 0
	showLines: true,
	spanGaps: false, //si se quiere mostrar las lineas cuando en algun elemento no hay dato (NaN)
	animation:{
		 duration: 0 // better performance at 0
	}, //animation
	layout: {
		padding: {
			top: 20,
		} //pading
	}, //layout
	elements: {
		point : {
			pointStyle: 'circle',
			radius: 5,
			hoverRadius: 7
		}, //points
		line: {
			tension: 0 //disable bezier curves, better performance
		}
	}, //elements
	legend: {
		display: true,
		position: 'bottom',
		labels : {
			padding: 20,
			usePointStyle: true,
			fontSize: 12,
			fontColor: 'rgba(0, 0, 0, 1)',
			fontFamily: 'sans-serif'
		} //labels
	}, //legend
	tooltips: {
		mode: 'index',
		intersect: true,
		position: 'average',
		backgroundColor: 'rgba(0, 0, 0, 0.8)',
		bodySpacing: 4,
		cornerRadius: 0,
		caretSize: 10,
		itemSort: function(a, b) {return (parseFloat(a.y) - parseFloat(b.y));}	
	}, //tooltips
    scale: {
		gridLines: {
    		display: true,
    		color: 'rgba(0, 0, 0, 0.4)'
    	}, //gridLines
        ticks: 
        {
            beginAtZero:true,
            max: 10,
            stepSize: 1,
            fontColor: 'rgba(0, 0, 0, 1)'
        }//ticks
    } //scales
} //options

var colorHash = new ColorHash();
var ctx = document.getElementById('myChart');
var myChart = new Chart(ctx,{
	type: 'radar',
	data: '',
	options: options
});

var meanDataSet = "";

// Funcion que genera un grafico con el dataset que recibe
// data : el dataset a mostrar en el gráfico
function generateChart(data){
	document.getElementById('chart-container').style.display = 'block';
	document.getElementById('inicio').style.display = 'none';
	myChart.data = data;
	if(document.getElementById('btnMean').value == 'Ocultar Media'){
		showMean();
	}
	myChart.update();
}

//Funcion que almacena la media.
function saveMean(mean){
	meanDataSet = mean;
}

//Funcion que muestra la media en el gráfico
function showMean() {
	if("" != meanDataSet){
		myChart.data.datasets.push(meanDataSet);
		myChart.update();
		document.getElementById('btnMean').value='Ocultar Media';
		document.getElementById('btnMean').setAttribute('onClick', 'hideMean()');
	}
}

//Funcion que elimina la media del gráfico
function hideMean() {
	myChart.data.datasets.pop();
	myChart.update();
	document.getElementById('btnMean').value='Mostrar Media';
	document.getElementById('btnMean').setAttribute('onClick', 'showMean()');
}

//Funcion que limpia el gráfico
function clearChart(){
	myChart.data = { labels:[],datasets: []};
	myChart.update();
}

//Funcion que devuelve un color en formato hexadecimal
//en base a el string que se le pasa
function colorGeneration(color){
	var rgbaColor = "rgba(";
	var colors = []
	colors = colorHash.rgb(color);
	for (i = 0; i < colors.length; i++) {
		rgbaColor += colors[i] + ",";
	}
	return rgbaColor;
}

//Oculta la leyenda del gráfico
function hideLegend() {
	myChart.options.legend.display = false;
	myChart.update();
	document.getElementById('btnLegend').value='Mostrar Leyenda';
	document.getElementById('btnLegend').setAttribute('onClick', 'showLegend()');
}

//Muestra la leyenda del gráfico
function showLegend() {
	myChart.options.legend.display = true;
	myChart.update();
	document.getElementById('btnLegend').value = 'Ocultar Leyenda';
	document.getElementById('btnLegend').setAttribute('onClick', 'hideLegend()');
}


</script>

</body>
</html>
